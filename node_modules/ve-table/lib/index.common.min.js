"use strict";function _interopDefault(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var numerify=_interopDefault(require("numerify")),ElTable=_interopDefault(require("element-ui/lib/table")),ElTableColumn=_interopDefault(require("element-ui/lib/table-column")),ElPagination=_interopDefault(require("element-ui/lib/pagination"));function getType(e){return Object.prototype.toString.call(e)}function isObject(e){return"[object Object]"===getType(e)}function isArray(e){return"[object Array]"===getType(e)}function clone(e){return isObject(e)?Object.assign({},e):isArray(e)?e.slice():e}var script={name:"VeTable",components:{ElTable:ElTable,ElTableColumn:ElTableColumn,ElPagination:ElPagination},props:{data:{type:Array,default:function(){return[]}},columns:{type:Array,default:function(){return[]}},keyProp:{type:String,default:"__index"},settings:{type:Object,default:function(){return{}}},total:{type:Number,default:0},page:{type:Number,default:1},pageSize:{type:Number,default:0},pagination:{type:Object,default:function(){return{}}},valueFormat:{type:Function,default:null},paginationVisible:{type:Boolean,default:!1}},computed:{innerColumns:function(e){var t=e.columns,n=e.keyProp,i=e.settings;return t.map(function(e,t){var a=clone(e);return isObject(e)||(a={label:e,prop:e}),a.__id="__auto"===n?e.prop+"-"+t+"-"+Math.random()+"-"+Date.now():"__index"===n?t:e[n],a.__sortMethod=a.sortMethod||i.__sortMethod||null,a})},innerPage:{get:function(){return this.page},set:function(e){this.$emit("update:page",e)}},innerPageSize:{get:function(){return this.pageSize||this.pagination.pageSize||this.globalSettings.pageSize},set:function(e){this.$emit("update:pageSize",e)}},pageSlots:function(e){return e.pagination.__slots||[]},innerLayout:function(e){var t=e.globalSettings,n=e.pagination;return t.layout||n.layout},innerPageSizes:function(e){var t=e.globalSettings,n=e.pagination;return t.pageSizes||n.pageSizes}},created:function(){this.globalSettings=window.VE_TABLE_DEFAULT||{}},methods:{sizeChangeHandler:function(e){this.innerPageSize=e},getValue:function(e,t){return this.valueFormat?this.valueFormat(e,t):numerify(e,t)}}},__vue_script__=script,__vue_render__=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"ve-table"},[e.settings.__tableSlot?e._t("__tableSlot"):n("el-table",e._g(e._b({ref:"table",attrs:{data:e.data}},"el-table",e.settings,!1),e.$listeners),[e.settings.__showCheckbox?n("el-table-column",{attrs:{width:e.settings.__checkboxWidth||55,type:"selection"}}):e._e(),e._v(" "),e._l(e.innerColumns,function(t){return n("el-table-column",e._b({key:t.__id,scopedSlots:e._u([{key:"default",fn:function(i){var a=i.row;return[t.__slot?e._t(t.__slot,null,{row:a,column:t,value:a[t.prop]}):"number"===t.__type&&null!=t.prop?n("div",[e._v("\n          "+e._s(e.getValue(a[t.prop],t.__format))+"\n        ")]):null!=t.prop?n("div",[e._v("\n          "+e._s(a[t.prop])+"\n        ")]):e._e()]}}])},"el-table-column",t,!1))}),e._v(" "),e.settings.__expand?n("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[e._t("__expand",null,{row:n})]}}])}):e._e()],2),e._v(" "),e.paginationVisible?n("el-pagination",e._b({attrs:{layout:e.innerLayout,"page-sizes":e.innerPageSizes,"page-size":e.innerPageSize,"current-page":e.innerPage,total:e.total},on:{"update:pageSize":function(t){e.innerPageSize=t},"update:currentPage":function(t){e.innerPage=t},"size-change":e.sizeChangeHandler}},"el-pagination",e.pagination,!1),[e._t("__paginationSlot")],2):e._e()],2)},__vue_staticRenderFns__=[];__vue_render__._withStripped=!0;var __vue_inject_styles__=void 0,__vue_scope_id__=void 0,__vue_module_identifier__=void 0,__vue_is_functional_template__=!1;function __vue_normalize__(e,t,n,i,a,r,o,_){var l=("function"==typeof n?n.options:n)||{};return l.__file="/Users/quietcoder/Workspace/ve-table/src/ve-table.vue",l.render||(l.render=e.render,l.staticRenderFns=e.staticRenderFns,l._compiled=!0,a&&(l.functional=!0)),l._scopeId=i,l}function __vue_create_injector__(){var e=document.head||document.getElementsByTagName("head")[0],t=__vue_create_injector__.styles||(__vue_create_injector__.styles={}),n="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());return function(i,a){if(!document.querySelector('style[data-vue-ssr-id~="'+i+'"]')){var r=n?a.media||"default":i,o=t[r]||(t[r]={ids:[],parts:[],element:void 0});if(!o.ids.includes(i)){var _=a.source,l=o.ids.length;if(o.ids.push(i),n&&(o.element=o.element||document.querySelector("style[data-group="+r+"]")),!o.element){var u=o.element=document.createElement("style");u.type="text/css",a.media&&u.setAttribute("media",a.media),n&&(u.setAttribute("data-group",r),u.setAttribute("data-next-index","0")),e.appendChild(u)}if(n&&(l=parseInt(o.element.getAttribute("data-next-index")),o.element.setAttribute("data-next-index",l+1)),o.element.styleSheet)o.parts.push(_),o.element.styleSheet.cssText=o.parts.filter(Boolean).join("\n");else{var s=document.createTextNode(_),c=o.element.childNodes;c[l]&&o.element.removeChild(c[l]),c.length?o.element.insertBefore(s,c[l]):o.element.appendChild(s)}}}}}var VeTable=__vue_normalize__({render:__vue_render__,staticRenderFns:__vue_staticRenderFns__},__vue_inject_styles__,__vue_script__,__vue_scope_id__,__vue_is_functional_template__,__vue_module_identifier__,__vue_create_injector__,void 0);function install(e,t){e.component(VeTable.name,VeTable)}"undefined"!=typeof window&&window.Vue&&install(window.Vue),module.exports=VeTable;
